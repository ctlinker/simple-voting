# Note of work

## Working with php as a project

the basic command to ge t started is `composer init` to have a basic project structure :

```tree
├── composer.json
├── src
└── vendor
    └── ...
```

for dev purpose we'll generaly go for something along the line of these for the src folder:

```tree
├── src
  ├── whatever the client don't get to see or private logics
  └── public
      └── whatever client see eg index.php api.php your pages
```

we can then serve our project with :

```bash
php -S localhost:8000 -t src/public
```

or just add it a script in composer.json:

```json
  "scripts": {
    "serve": "php -S localhost:8000 -t src/public"
  }
```

and then `composer serve`

## Working with namespace

namespace in php works by `autoloading` through `vendor/autoload.php` and as well the `autoload` section of composer.json eg :

considering a minimal project structure:

```tree
├── composer.json
├── src
│   ├── mock
│   │   └── MyClass.php
│   └── public
│       └── index.php
└── vendor
    ├── autoload.php
    └── ...
```

- index.php

  ```php
    <?php
    require __DIR__ . "/../../vendor/autoload.php";
    use Mock\MyClass;
    $m = new MyClass();
    echo $m->greet();
  ```

- MyClass.php

  ```php
  <?php
    namespace Mock;
    class MyClass
    {
        public function greet()
        {
            return "Hello from MyClass!";
        }
    }
  ```

- composer.json

  ```json
    "autoload": {
    "psr-4": {
      "Mock\\": "src/mock"
    }
  }
  ```

> [!NOTE]: Each time we add a new namespace or file to an existing namespace
> we must run the cmd `composer dump-autoload`

> [!WARNING]: namespace are case sensitive and closely coupled to file that contain them they must be declared in a file whose name is the same as the class they contain or at least identical to one of em:
> eg: `class MyClass` inside `MyClass.php`
> had we a seconde class we would have done: `class MyClass2` inside `MyClass2.php`
> or we could have more specific in autoloading eg :

  ```json
    "autoload": {
    "psr-4": {
      "Mock\\Myclass1": "src/mock/Classes.php",
      "Mock\\Myclass2": "src/mock/Classes.php",
      "Mock\\Myclass3": "src/mock/Classes.php"
    }
  }
  ```
  